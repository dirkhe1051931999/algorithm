# 划分型动态规划

1. 给定长度为 N 的序列或者字符串，要求划分成若干段，段数不限或者指定 K 段，每一段满足若干性质
2. 类似序列型动态规划，但是通常要加上段数信息
3. 一般用 f[i][j]来表示前 i 个元素分成 j 段的性质，如最小代价

## 划分型动态规划的使用

1. **完全平方数(leetcode 279)**

- 给定正整数 n，找到若干个完全平方数（比如 1, 4, 9, 16, ...）使得它们的和等于 n
- 问：`你需要让组成和的完全平方数的个数最少`
- 比如：n = 13 ，结果是 2 ，因为 13 = 4 + 9.
- 确定状态
  1. 最后一步：最优策略中最后一个完全平方式 j^2，最优策略 n-j^2 也一定能被划分成最少的完全平方数之和，需要知道 n-j^2 最少被分成几个完全平方数之和
  2. 子问题：原来是求 n 最少被分成几个完全平方数之和，现在转换成 n-j^2，这就是一个子问题
  3. 状态：f[i]表示 i 最少能被分成几个完全平方数之和
- 转义方程
  1. f[i] = min{f[i-j^2]+1} 其中 1<=j\*j<=i
- 初始条件与边缘情况
  1. f[0] = 0
- 计算顺序
  1. 从左到右

```js
// 时间复杂度O(n^1.5)
function numSquares(n) {
  if (n === 0) {
    return 0;
  }
  var f = new Array(n + 1);
  f[0] = 0;
  for (var i = 1; i <= n; i++) {
    f[i] = Infinity;
    for (var j = 1; j * j <= i; j++) {
      f[i] = Math.min(f[i], f[i - j * j] + 1);
    }
  }
  return f[n];
}
var test = 12;
console.log(numSquares(test));
// 3
```
